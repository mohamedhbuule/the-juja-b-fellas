// Arabic Translations
const translations = {
  ar: {
    // Navigation
    'Home': 'الرئيسية',
    'About': 'من نحن',
    'Book Session': 'حجز جلسة',
    'Plan Revision': 'خطط للمراجعة',
    'My Timetable': 'جدولي',
    'Subjects': 'المواد',
    'Motivation': 'الح motivation',
    'Contact': 'اتصل بنا',
    'Profile': 'الملف الشخصي',
    'Logout': 'تسجيل الخروج',
    
    // Common
    'Welcome back! Please login to continue': 'مرحباً بعودتك! يرجى تسجيل الدخول للمتابعة',
    'Don\'t have an account?': 'ليس لديك حساب؟',
    'Sign up here': 'سجل هنا',
    'Already have an account?': 'لديك حساب بالفعل؟',
    'Login here': 'سجل الدخول هنا',
    
    // Language Selection
    'Choose your preferences to continue': 'اختر تفضيلاتك للمتابعة',
    'Choose Language': 'اختر اللغة',
    'Continue in English': 'المتابعة بالإنجليزية',
    'Continue in Arabic': 'المتابعة بالعربية',
    'Choose Study Mode': 'اختر طريقة الدراسة',
    'Study Alone': 'الدراسة الفردية',
    'Plan your personal revision schedule': 'خطط لجدول مراجعتك الشخصية',
    'Study with Companion': 'الدراسة مع رفيق',
    'Study with friends and create groups': 'ادرس مع الأصدقاء وأنشئ مجموعات',
    'Group Revision': 'المراجعة الجماعية',
    'Join or create revision groups': 'انضم أو أنشئ مجموعات مراجعة',
    'Continue': 'متابعة',
    
    // Sessions/Booking
    'Book Your Revision Session': 'احجز جلسة المراجعة',
    'Plan Your Revision': 'خطط للمراجعة',
    'You can book multiple sessions per day. Each session can have different subject and venue.': 'يمكنك حجز عدة جلسات في اليوم. يمكن أن يكون لكل جلسة مادة وموقع مختلف.',
    'Create your personal revision timetable. You can add multiple sessions and manage them all in one place.': 'أنشئ جدول مراجعتك الشخصي. يمكنك إضافة عدة جلسات وإدارتها جميعاً في مكان واحد.',
    'Select Date': 'اختر التاريخ',
    'Choose the date for your session (2nd - 6th February)': 'اختر تاريخ جلستك (2-6 فبراير)',
    'Select Time': 'اختر الوقت',
    'Choose your session start and end time (24 hours available)': 'اختر وقت بداية ونهاية جلستك (24 ساعة متاحة)',
    'Start Time': 'وقت البداية',
    'End Time': 'وقت النهاية',
    'Select Subject': 'اختر المادة',
    'Choose the subject you want to study': 'اختر المادة التي تريد دراستها',
    'Select Venue': 'اختر المكان',
    'Choose your preferred venue': 'اختر المكان المفضل لديك',
    'Select Floor': 'اختر الطابق',
    'Complete Booking': 'إتمام الحجز',
    'Make a Timetable': 'إنشاء الجدول',
    'Next: Choose Time': 'التالي: اختر الوقت',
    'Next: Choose Subject': 'التالي: اختر المادة',
    'Next: Choose Venue': 'التالي: اختر المكان',
    'Back': 'رجوع',
    
    // Subjects
    'Science of Hadith': 'علم الحديث',
    'Jurisprudence': 'الفقه',
    'Principles of Islamic Jurisprudence': 'أصول الفقه',
    'Translation of the Quran': 'ترجمة القرآن الكريم',
    'Hadith': 'الحديث',
    
    // Venues
    'Home': 'المنزل',
    'Al Basiirah Mosque': 'مسجد البصيرة',
    'Al Hijaaz Mosque': 'مسجد الحجاز',
    'Masjid Abii Bakar': 'مسجد أبي بكر',
    'Al Hidaayah Mosque': 'مسجد الهداية',
    
    // Timetable
    'My Timetable': 'جدولي',
    'View and manage your revision schedule': 'عرض وإدارة جدول المراجعة',
    'Add Session': 'إضافة جلسة',
    'Export': 'تصدير',
    'No Sessions Yet': 'لا توجد جلسات بعد',
    'Start planning your revision by adding sessions to your timetable.': 'ابدأ في تخطيط مراجعتك بإضافة جلسات إلى جدولك.',
    'Plan Your First Session': 'خطط لأول جلسة',
    'Edit Session': 'تعديل الجلسة',
    'Save Changes': 'حفظ التغييرات',
    'Cancel': 'إلغاء',
    'session': 'جلسة',
    'sessions': 'جلسات',
    
    // Success Messages
    'Session Booked Successfully!': 'تم حجز الجلسة بنجاح!',
    'Your booking has been confirmed and sent to your email.': 'تم تأكيد حجزك وإرساله إلى بريدك الإلكتروني.',
    'Timetable Updated!': 'تم تحديث الجدول!',
    'Your revision session has been added to your timetable.': 'تمت إضافة جلسة المراجعة إلى جدولك.',
    
    // Profile
    'My Profile': 'ملفي الشخصي',
    'Manage your account and view your information': 'إدارة حسابك وعرض معلوماتك',
    'Your Statistics': 'إحصائياتك',
    'Total Bookings': 'إجمالي الحجوزات',
    'Upcoming Sessions': 'الجلسات القادمة',
    'Completed Sessions': 'الجلسات المكتملة',
    'Account Settings': 'إعدادات الحساب',
    'Username': 'اسم المستخدم',
    'Email Address': 'عنوان البريد الإلكتروني',
    'Current Password': 'كلمة المرور الحالية',
    'New Password': 'كلمة المرور الجديدة',
    'Confirm New Password': 'تأكيد كلمة المرور الجديدة',
    'My Recent Bookings': 'حجوزاتي الأخيرة',
    'View All': 'عرض الكل',
    'No bookings yet.': 'لا توجد حجوزات بعد.',
    'Book your first session!': 'احجز أول جلسة!',
    
    // About
    'About Us': 'من نحن',
    'Our Mission': 'مهمتنا',
    'Our Vision': 'رؤيتنا',
    'What We Offer': 'ما نقدمه',
    'Join Us': 'انضم إلينا',
    'Start Your Journey': 'ابدأ رحلتك',
    
    // Contact
    'Get In Touch': 'تواصل معنا',
    'We\'re here to help. Reach out to us anytime!': 'نحن هنا للمساعدة. تواصل معنا في أي وقت!',
    'Email': 'البريد الإلكتروني',
    'Phone': 'الهاتف',
    'Location': 'الموقع',
    'Response Time': 'وقت الاستجابة',
    'We typically respond within 24 hours': 'نرد عادة خلال 24 ساعة',
    'Send us a Message': 'أرسل لنا رسالة',
    'Your Name': 'اسمك',
    'Your Email': 'بريدك الإلكتروني',
    'Your Message': 'رسالتك',
    'Send Message': 'إرسال الرسالة',
    
    // Motivation
    'Words of Wisdom': 'كلمات الحكمة',
    'Find inspiration for your learning journey': 'ابحث عن الإلهام لرحلتك التعليمية'
  }
};

// Translation function
function t(key, lang = null) {
  const currentLang = lang || localStorage.getItem('currentLanguage') || 'en';
  if (currentLang === 'ar' && translations.ar[key]) {
    return translations.ar[key];
  }
  return key;
}

// Update page content based on language
function updatePageLanguage(lang) {
  // Set document direction and language
  if (lang === 'ar') {
    document.documentElement.setAttribute('dir', 'rtl');
    document.documentElement.setAttribute('lang', 'ar');
    document.body.classList.add('arabic-text');
  } else {
    document.documentElement.setAttribute('dir', 'ltr');
    document.documentElement.setAttribute('lang', 'en');
    document.body.classList.remove('arabic-text');
  }

  // Update all elements with data-translate attribute
  const elements = document.querySelectorAll('[data-translate]');
  elements.forEach(el => {
    const key = el.getAttribute('data-translate');
    const translation = t(key, lang);
    if (translation && translation !== key) {
      el.textContent = translation;
    }
  });

  // Update placeholders
  const inputs = document.querySelectorAll('[data-placeholder-translate]');
  inputs.forEach(input => {
    const key = input.getAttribute('data-placeholder-translate');
    const translation = t(key, lang);
    if (translation && translation !== key) {
      input.placeholder = translation;
    }
  });

  // Update navigation links (handle emoji + text)
  const navLinks = document.querySelectorAll('.nav-link');
  navLinks.forEach(link => {
    const span = link.querySelector('span[data-translate]');
    if (span) {
      const key = span.getAttribute('data-translate');
      const translation = t(key, lang);
      if (translation && translation !== key) {
        span.textContent = translation;
      }
    } else {
      // Fallback: try to translate the whole text
      const text = link.textContent.trim();
      const emoji = text.match(/^[\u{1F300}-\u{1F9FF}]/u)?.[0] || '';
      const textWithoutEmoji = text.replace(/^[\u{1F300}-\u{1F9FF}]\s*/, '').trim();
      if (translations.ar[textWithoutEmoji]) {
        link.textContent = lang === 'ar' ? emoji + ' ' + translations.ar[textWithoutEmoji] : text;
      }
    }
  });

  // Update page title
  const pageTitle = document.querySelector('title');
  if (pageTitle) {
    const currentTitle = pageTitle.textContent;
    if (lang === 'ar') {
      // Translate common title patterns
      if (currentTitle.includes('Home')) {
        pageTitle.textContent = currentTitle.replace('Home', 'الرئيسية');
      } else if (currentTitle.includes('About')) {
        pageTitle.textContent = currentTitle.replace('About', 'من نحن');
      } else if (currentTitle.includes('Book Session') || currentTitle.includes('Plan Revision')) {
        pageTitle.textContent = currentTitle.replace(/Book Session|Plan Revision/, 'خطط للمراجعة');
      } else if (currentTitle.includes('Timetable')) {
        pageTitle.textContent = currentTitle.replace('Timetable', 'جدولي');
      } else if (currentTitle.includes('Profile')) {
        pageTitle.textContent = currentTitle.replace('Profile', 'الملف الشخصي');
      }
    }
  }
}
